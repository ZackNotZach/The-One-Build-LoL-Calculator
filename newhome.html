<!DOCTYPE html>
<html>
<head>

<link href="newhome.css" rel="stylesheet">
<title>The One Build</title>

</head>
<body>

<!-- ALL JAVASCRIPT GOES HERE -->
<script type="text/javascript">
	function on_search(e){
		var code = (e.keyCode ? e.keyCode : e.which);
		if(code==13){
			
			//champion icon
			var champname = document.getElementById('champsearch');
			var name = champname.value;
			var icon = document.getElementById('champicon');
			
			//need to grab latest patch number and insert here
			var icon_url = "http://ddragon.leagueoflegends.com/cdn/5.22.3/img/champion/";
			var almost = name.concat(".png");
			icon.src = icon_url.concat(almost);
			
			//splash art
			var splash_url = "http://ddragon.leagueoflegends.com/cdn/img/champion/splash/";
			almost = name.concat("_0.jpg");
			splash_url = splash_url.concat(almost);
			document.body.style.backgroundImage = 'url("'+splash_url+'")';
			
			/*check if result is a 404
			
			var icon = document.getElementById('champicon');
			icon.src = "Icons/nochamp.png";
			console.log("that's not a real champ, silly goose"); */
			
			/*transition into base stats screen*/
			document.getElementById('pagetitle').innerHTML = "Nice choice. Here's "+name+"'s Base Stats.";
			document.getElementById('paragraph').innerHTML = "To add runes, calculate gold, and create your build, use the tabs on the right side " +
															 "of the screen. Your stats will update as you go--you can come back and view them at any time.";
			document.getElementById('transbarleft').style.visibility = 'visible';
			document.getElementById('transbarmid').style.visibility = 'visible';
			document.getElementById('transbarright').style.visibility = 'visible';
			
			/*get base stats from API*/
			setTimeout(get_base_stats(), 1);
		}
	}
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script>
	function get_base_stats(){
		var champ_name = "";
		champ_name = $("#champsearch").val();
		$.ajax({
			url: 'https://global.api.pvp.net/api/lol/static-data/na/v1.2/champion?champData=stats&api_key=59080bd8-1d31-44be-8a1e-3ecd9a372501',
			type: 'GET',
			dataType: 'json',
			data:{},
			success: function (json) {
				var champname_nospaces = champ_name.replace(" ", "");
				champname_nospaces = champname_nospaces.toLowerCase().trim();
		
				pass = json.data[champ_name].stats;
				console.log(pass);
		
				var stats = {attackrange:"0",mpperlevel:"0",mp:"0",attackdamage:"0",hp:"0",hpperlevel:"0",attackdamageperlevel:"0",armor:"0",mpregenperlevel:"0",
							 hpregen:"0",critperlevel:"0",spellblockperlevel:"0",mpregen:"0",
							 attackspeedperlevel:"0",spellblock:"0",movespeed:"0",attackspeedoffset:"0",crit:"0",hpregenperlevel:"0",armorperlevel:"0"};
		
				for(var property in stats)
				{
					if(stats.hasOwnProperty(property))
					{
						stats[property]=json.data[champ_name].stats[property];
					}
				}
		
				//i know this looks janky, and it is, so i have no excuse
				//document.getElementById("mpperlevel").value=stats.mpperlevel;
				document.getElementById("mana").innerHTML=stats.mp;
				document.getElementById("attackdamage").innerHTML=stats.attackdamage;
				document.getElementById("health").innerHTML=stats.hp;
				//document.getElementById("hpperlevel").value=stats.hpperlevel;
				//document.getElementById("attackdamageperlevel").value=stats.attackdamageperlevel;
				document.getElementById("armor").innerHTML=stats.armor;
				//document.getElementById("mpregenperlevel").value=stats.mpregenperlevel;
				document.getElementById("healthregen").innerHTML=stats.hpregen;
				//document.getElementById("critperlevel").value=stats.critperlevel;
				//document.getElementById("mrperlevel").value=stats.spellblockperlevel;
				document.getElementById("manaregen").innerHTML=stats.mpregen;
				//document.getElementById("attackspeedperlevel").value=stats.attackspeedperlevel;
				document.getElementById("magicresist").innerHTML=stats.spellblock;
				document.getElementById("movespeed").innerHTML=stats.movespeed;
				document.getElementById("criticalchance").innerHTML=stats.crit;
				//document.getElementById("hpregenperlevel").value=stats.hpregenperlevel;
				//document.getElementById("armorperlevel").value=stats.armorperlevel;
				//document.getElementById("attackspeedoffset").value=stats.attackspeedoffset;
			}
		})
	}
</script>

<!-- ALL HTML GOES HERE -->
<div class="transbox">
	<div class="theonebuild"><span id="pagetitle">One Build to Rule Them All...</span></div>
	<div class="intro"><span id="paragraph"  style="">Plan your powerspikes. Here at The One Build, you can craft your runepage,
					   simulate your gold income, and calculate your stats for any build imaginable.
					   Begin your experiment by searching for a champion below.</span></div>
</div>

<!-- maybe there's a better way to do this -->
<div class="row">
	<div class="col-1 statlist">
		<div class="transbarleft"  id="transbarleft">
			<div><img id="champicon" style="padding: 3px;" src="Icons/nochamp.png"></img></div>
			<ul>
			  <li>Health - <span id="health">0000</span></li>
			  <li>Mana - <span id="mana">0000</span></li>
			  <li>Health Regen - <span id="healthregen">0000</span></li>
			  <li>Mana Regen - <span id="manaregen">0000</span></li>
			  <li>AD - <span id="attackdamage">0000</span></li>
			  <li>AS - <span id="attackspeed">0000</span></li>
			  <li>Crit - <span id="criticalchance">0000</span></li>
			  <li>AP - <span id="abilitypower">0000</span></li>
			  <li>MPen - <span id="magicpen">0000</span></li>
			  <li>%Mpen - <span id="percentmagicpen">0000</span></li>
			  <li>ArPen - <span id="armorpen">0000</span></li>
			  <li>%ArPen - <span id="percentarmorpen">0000</span></li>
			  <li>CDR - <span id="cooldownreduction">0000</span></li>
			  <li>Movespeed - <span id="movespeed">0000</span></li>
			  <li>MResist - <span id="magicresist">0000</span></li>
			  <li>Armor - <span id="armor">0000</span></li>
			</ul>
		</div>
	</div>
	
	<div class="col-2 stuff">
		<div class="transbarmid" id="transbarmid">
			<ul>
			  <li>I HAVE NO IDEA WHY PUTTING A LIST IN HERE MAKE THE WHOLE BOX MOVE DOWN LIKE 10PX WTF</li>
			</ul>
		</div>
	</div>
	
	<div class="col-3 navbar">
		<div class="transbarright" id="transbarright">
			<ul>
			  <li><span id="nav1">Abilities</span></li>
			  <li><span id="nav2">Runes</span></li>
			  <li><span id="nav3">Masteries</span></li>
			  <li><span id="nav4">Game Data</span></li>
			  <li><span id="nav5">Shop</span></li>
			</ul>
		</div>
	</div>
</div>


<div class="transbarnav" id="transbar">
	
</div>

<img class="champicon" src="Icons/nochamp.png"></img>
<input id="champsearch" class="champsearch" type="text" placeholder="Search for a Champion..." onkeypress="on_search(event)"></input>

</body>
</html>